------------------------------------------
@Bean
public AuthenticationManager authenticationManager() {
    DaoAuthenticationProvider provider = new DaoAuthenticationProvider();
    provider.setUserDetailsService(customUserDetailsService);
    provider.setPasswordEncoder(passwordEncoder());
    return new ProviderManager(provider);
}
Khi ngÆ°á»i dÃ¹ng Ä‘Äƒng nháº­p:
Spring táº¡o UsernamePasswordAuthenticationToken vá»›i username + password.

DaoAuthenticationProvider.authenticate() Ä‘Æ°á»£c gá»i.

Gá»i userDetailsService.loadUserByUsername(username)

So sÃ¡nh password ngÆ°á»i dÃ¹ng nháº­p (plain text) vá»›i password trong DB (báº±ng PasswordEncoder.matches())

Náº¿u Ä‘Ãºng â†’ Tráº£ vá» Authentication cÃ³ isAuthenticated=true.
DaoAuthenticationProvider	Cáº§u ná»‘i giá»¯a Spring Security vÃ  dá»¯ liá»‡u ngÆ°á»i dÃ¹ng
UserDetailsService	Truy xuáº¥t thÃ´ng tin ngÆ°á»i dÃ¹ng tá»« database
PasswordEncoder	So sÃ¡nh máº­t kháº©u ngÆ°á»i dÃ¹ng nháº­p vá»›i máº­t kháº©u Ä‘Ã£ mÃ£ hÃ³a trong DB

SÆ  Äá»’ 
Client -> Username + Password
     â†“
AuthenticationManager
     â†“
DaoAuthenticationProvider
     â†“
UserDetailsService.loadUserByUsername()
     â†“
UserDetails (cÃ³ password + roles)
     â†“
So sÃ¡nh password
     â†“
XÃ¡c thá»±c thÃ nh cÃ´ng â†’ tráº£ Authentication
------------------------------------------


----------------------------------------------------
USERDETAILSERVICE 
UserDetailsService liÃªn quan gÃ¬ tá»›i Authentication?
Khi báº¡n thá»±c hiá»‡n Ä‘Äƒng nháº­p, Spring sáº½ cháº¡y:

Báº¡n gá»­i username + password lÃªn.

Spring táº¡o ra UsernamePasswordAuthenticationToken (unauthenticated).

Gá»­i nÃ³ Ä‘áº¿n AuthenticationManager.

AuthenticationManager gá»i AuthenticationProvider.

AuthenticationProvider gá»i UserDetailsService.loadUserByUsername(username)

Tráº£ vá» UserDetails â†’ so sÃ¡nh password.

Náº¿u Ä‘Ãºng â†’ tráº£ vá» Authentication Ä‘Ã£ xÃ¡c thá»±c.


----------------------------------------------------
Má»™t object Authentication (vÃ­ dá»¥: UsernamePasswordAuthenticationToken) cÃ³ nhá»¯ng thÃ nh pháº§n quan trá»ng sau
getPrincipal()	Äá»‘i tÆ°á»£ng ngÆ°á»i dÃ¹ng Ä‘Ã£ xÃ¡c thá»±c
getCredentials()	Máº­t kháº©u (thÆ°á»ng bá»‹ áº©n sau xÃ¡c thá»±c)
getAuthorities()	Danh sÃ¡ch quyá»n
isAuthenticated()	Tráº¡ng thÃ¡i xÃ¡c thá»±c
getDetails()	ThÃ´ng tin bá»• sung
---------------------------------------------------


AuthenticationManager sá»­ dá»¥ng má»™t hoáº·c nhiá»u AuthenticationProvider Ä‘á»ƒ thá»±c hiá»‡n xÃ¡c thá»±c.

Báº¡n cÃ³ thá»ƒ hÃ¬nh dung:

ğŸ‘‰ AuthenticationManager = ngÆ°á»i Ä‘iá»u phá»‘i
ğŸ‘‰ AuthenticationProvider = ngÆ°á»i thá»±c hiá»‡n

Khi báº¡n gá»i authenticationManager.authenticate(...), manager sáº½ láº§n lÆ°á»£t gá»i cÃ¡c AuthenticationProvider Ä‘á»ƒ tÃ¬m ra cÃ¡i nÃ o há»— trá»£ kiá»ƒu Authentication báº¡n truyá»n vÃ o, rá»“i dÃ¹ng nÃ³ Ä‘á»ƒ xÃ¡c thá»±c.

------------------------------------------------------------------------


String token =jwtTokenHelper.generateToken(user.getEmail());
                 UserToken userToken= UserToken.builder().token(token).build();
                 return new ResponseEntity<>(userToken,HttpStatus.OK);

VÃ¬ sao cáº§n UserToken?	Äá»ƒ gÃ³i token vÃ o 1 object rÃµ rÃ ng, dá»… má»Ÿ rá»™ng, dá»… dÃ¹ng frontend
CÃ³ báº¯t buá»™c khÃ´ng?	KhÃ´ng báº¯t buá»™c, nhÆ°ng nÃªn lÃ m
Lá»£i Ã­ch?	Dá»… maintain, tuÃ¢n chuáº©n REST, dá»… thÃªm thÃ´ng tin sau nÃ y

------------------------------------------------------------------------
ENTITY USER
provider	XÃ¡c Ä‘á»‹nh loáº¡i Ä‘Äƒng nháº­p	manual, google, facebook,...
verificationCode	MÃ£ xÃ¡c minh tÃ i khoáº£n	DÃ¹ng trong Ä‘Äƒng kÃ½ qua email
enabled	Tráº¡ng thÃ¡i tÃ i khoáº£n	Chá»‰ cho login khi Ä‘Ã£ xÃ¡c minh email

------------------------------------------------------------------------




